<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Create Event</title>
    <link rel="stylesheet" href="/bootstrap/dist/css/bootstrap.css" />
    <script
      src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
      integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"
      integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
      integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
      integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
      crossorigin="anonymous"
    ></script>
    <!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css"> -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.1/css/bootstrap-select.css"
    />
    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script> -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.1/js/bootstrap-select.min.js"></script>
  </head>
  <body>
    <%- include('./../header',{loggedin:loggedIn}); -%>

    <div class="container">
      <h1 class="mt-3 mb-3">Create Event</h1>
      <form
        action="/events/newevent"
        class="needs-validation"
        method="post"
        novalidate
      >
        <h3>Event Details :</h3>

        <div class="row">
          <div class="form-group col-lg-6">
            <label for="eventName">Event Name</label>
            <input
              type="text"
              name="eventName"
              id="eventName"
              class="form-control"
              placeholder="Enter the event Name"
              required
            />
            <div class="invalid-feedback">Please enter an Event name.</div>
          </div>

          <div class="form-group col-lg-6">
            <label for="tag">Tag line</label>
            <input
              type="text"
              name="tag"
              id="tag"
              class="form-control"
              placeholder="Enter the tag line"
              required
            />
            <div class="invalid-feedback">Please enter a Tagline.</div>
          </div>
        </div>
        <br />

        <div class="row">
          <div class="form-group col-lg-5">
            <label for="startDate">Starts At: </label>
            <input
              type="datetime-local"
              name="startDate"
              id="startDate"
              class="form-control"
              required
            />
            <div class="invalid-feedback">Please choose a Start date.</div>
          

          </div>
          <div class="col-lg-1"></div>
          <div class="form-group col-lg-5">
            <label for="endDate">Ends At: </label>
            <input
              type="datetime-local"
              name="endDate"
              id="endDate"
              class="form-control"
              required
            />
            <div class="invalid-feedback">Please choose a end date.</div>
          </div>
        </div>

        <br />

        <div class="row">
          <div class="form-group col-lg-6">
            <label for="image"
              >Banner Image URL<span class="text-muted">(Optional)</span></label
            >
            <input
              type="url"
              name="profileImage"
              id="image"
              class="form-control"
              placeholder=""
            />
          </div>
          <div class="form-group col-lg-6">
            <label for="location">
              Location</label>
            <input
              type="text"
              name="location"
              id="location"
              class="form-control"
              placeholder=""
              required
            />
            <div class="invalid-feedback">please enter a location</div>
          </div>
        </div>

        <br />

        <div class="row">
          <div class="form-group col-lg-12">
            <label for="description"> Description</label>
            <textarea
              name="eventDescription"
              id="description"
              class="form-control"
              rows="10"
              required
            ></textarea>
            <div class="invalid-feedback">Please enter a description.</div>
          </div>
        </div>

        <br />
        <hr />
        <br />

        <h3>Guest Details : (Optional)</h3>

        <br />

        <div class="guests">
          <div class="row">
            <div class="col-lg-6">
              <label for="guestName"> Guest Name </label>
              <input
                type="text"
                name="guestName"
                id="guestName"
                class="form-control"
              />
            </div>
            <div class="col-lg-6">
              <label for="guestProfession"> Guest's profession </label>
              <input
                type="text"
                name="guestProfession"
                id="guestProfession"
                class="form-control"
              />
            </div>
          </div>

          <div class="row">
            <div class="col-lg-12">
              <label for="guestImage"> Guest Image URL </label>
              <input
                type="url"
                name="guestImage"
                id="guestImage"
                class="form-control"
              />
            </div>
          </div>

          <br />

          <div class="row col-lg-12 justify-content-center">
            <div class="form-group col-lg-3">
              <label for="facebook"> social media links ( Optional ) </label>
              <input
                type="url"
                name="facebook"
                id="guestName"
                class="form-control"
                placeholder="facebook"
              />
            </div>

            <div class="form-group col-lg-3">
              <label for="instagram"> social media links ( Optional ) </label>
              <input
                type="url"
                name="instagram"
                id="instagram"
                class="form-control"
                placeholder="instagram"
              />
            </div>

            <div class="form-group col-lg-3">
              <label for="twitter"> social media links ( Optional ) </label>
              <input
                type="url"
                name="twitter"
                id="twitter"
                class="form-control"
                placeholder="twitter"
              />
            </div>
          </div>
          <br />
        </div>

        <button
          type="button"
          class="add_guest btn btn-secondary"
          value="Create Element"
        >
          new Guest
        </button>

        <br />
        <hr />
        <br />

        <h3>Gallery image URL's</h3>

        <br />

        <div class="row imageGallery">
          <div class="form-group" style="margin: 2% 0">
            <label for="image"> Image URL </label>
            <input
              type="url"
              name="image"
              id="image"
              class="form-control"
              placeholder="Image url"
            />
          </div>
        </div>

        <button
          type="button"
          class="btn btn-secondary add_image"
          value="Create Element"
        >
          new image
        </button>

        <br />
        <hr />
        <br />

        <div class="container" style="margin: 2% 0">
          <label> <b>Who should be notified ?</b> </label>
          <select
            class="selectpicker"
            name="emailreceiver"
            multiple
            data-live-search="true"
          >
            <option value="alumni">Alumni's</option>
            <option value="student">Student's</option>
            <option value="teacher">Lecturer's</option>
          </select>
        </div>

        <button class="btn btn-primary" type="submit" name="button">
          Create Event
        </button>
      </form>
    </div>
    <script type="text/javascript">
      $(document).ready(function () {
        var max_image_field = 25; //maximum input boxes allowed
        var max_guest_field = 10; //maximum input boxes allowed
        var image_wrapper = $(".imageGallery"); //Fields wrapper
        var guest_wrapper = $(".guests"); //Fields wrapper
        var add_image = $(".add_image"); //Add button ID
        var add_guest = $(".add_guest"); //Add button ID
        var x = 1; //initlal text box count
        var y = 1;
        var guest_content =
          ' <div style="padding-bottom:2%"> <div class="row" style="padding-top:5%;border-top:1px solid #495057">' +
          '<h3> New Guest : </h3> <div class="col-lg-6">' +
          '<label for="guestName"> Guest Name </label>' +
          '<input type="text" name="guestName" id="guestName" class="form-control" required>' +
          "</div>" +
          '<div class="col-lg-6">' +
          '<label for="guestProfession"> Guest\'s profession </label>' +
          '<input type="text" name="guestProfession" id="guestProfession" class="form-control" required>' +
          "</div>" +
          "</div>" +
          '<div class="row">' +
          '<div class="col-lg-12">' +
          '<label for="guestImage"> Guest Image URL </label>' +
          '<input type="url" name="guestImage" id="guestImage" class="form-control" required>' +
          "</div>" +
          "</div>" +
          "<br>" +
          '<div class="row col-lg-12 justify-content-center">' +
          '<div class="form-group col-lg-3">' +
          '<label for="facebook"> social media links ( Optional ) </label>' +
          '<input type="url" name="facebook" id="guestName" class="form-control" placeholder="facebook">' +
          "</div>" +
          '<div class="form-group col-lg-3">' +
          '<label for="instagram"> social media links ( Optional ) </label>' +
          '<input type="url" name="instagram" id="instagram" class="form-control" placeholder="instagram">' +
          "</div>" +
          '<div class="form-group col-lg-3">' +
          '<label for="twitter"> social media links ( Optional ) </label>' +
          '<input type="url" name="twitter" id="twitter" class="form-control" placeholder="twitter">' +
          "</div>" +
          "</div>" +
          '<div class="input-group-append" style="justify-content: center;display: flex;margin: 2% 0px;"><button class="btn btn-outline-danger remove_field" type="button">Remove</button></div>' +
          "</div>";

        // images

        $(add_image).click(function (e) {
          //on add input button click
          e.preventDefault();
          if (x < max_image_field) {
            //max input box allowed
            x++; //text box increment
            $(image_wrapper).append(
              '<div class="form-group"> <label for="image"> Image URL </label> <input type="url" name="image" id="image" class="form-control" placeholder="Image url" </div> <div class="input-group-append" style="justify-content: center;display: flex;margin: 2% 0px;"><button class="btn btn-outline-danger remove_field" type="button">Remove</button></div>'
            ); //add input box
          }
        });

        $(image_wrapper).on("click", ".remove_field", function (e) {
          //user click on remove text
          e.preventDefault();
          $(this).parent("div").parent("div").remove();
          x--;
        });

        $(add_guest).click(function (e) {
          //on add input button click
          e.preventDefault();
          if (y < max_guest_field) {
            //max input box allowed
            y++; //text box increment
            $(guest_wrapper).append(guest_content); //add input box
          }
        });

        $(guest_wrapper).on("click", ".remove_field", function (e) {
          //user click on remove text
          e.preventDefault();
          $(this).parent("div").parent("div").remove();
          y--;
        });
      });

      $("select").selectpicker();

      (function () {
        "use strict";
        window.addEventListener(
          "load",
          function () {
            // Fetch all the forms we want to apply custom Bootstrap validation styles to
            var forms = document.getElementsByClassName("needs-validation");
            // Loop over them and prevent submission
            var validation = Array.prototype.filter.call(
              forms,
              function (form) {
                form.addEventListener(
                  "submit",
                  function (event) {
                    if (form.checkValidity() === false) {
                      event.preventDefault();
                      event.stopPropagation();
                    }
                    form.classList.add("was-validated");
                  },
                  false
                );
              }
            );
          },
          false
        );
      })();
      // for email reciever multi select
      // $(document).ready(function(){
      // });
    </script>
  </body>
</html>
